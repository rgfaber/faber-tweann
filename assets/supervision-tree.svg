<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-size="20" font-weight="bold">Process Supervision Tree</text>
  <text x="450" y="50" text-anchor="middle" font-size="12" fill="#666">faber-tweann v0.8.0</text>

  <!-- Population Monitor (Root) -->
  <rect x="350" y="80" width="200" height="60" fill="#dc2626" stroke="#991b1b" stroke-width="2" rx="8"/>
  <text x="450" y="105" text-anchor="middle" font-size="14" fill="white" font-weight="bold">population_monitor</text>
  <text x="450" y="125" text-anchor="middle" font-size="11" fill="white">(gen_server)</text>

  <!-- Exoself Processes -->
  <rect x="100" y="200" width="160" height="60" fill="#9333ea" stroke="#6b21a8" stroke-width="2" rx="8"/>
  <text x="180" y="225" text-anchor="middle" font-size="13" fill="white" font-weight="bold">exoself_1</text>
  <text x="180" y="245" text-anchor="middle" font-size="10" fill="white">(process)</text>

  <rect x="370" y="200" width="160" height="60" fill="#9333ea" stroke="#6b21a8" stroke-width="2" rx="8"/>
  <text x="450" y="225" text-anchor="middle" font-size="13" fill="white" font-weight="bold">exoself_2</text>
  <text x="450" y="245" text-anchor="middle" font-size="10" fill="white">(process)</text>

  <rect x="640" y="200" width="160" height="60" fill="#9333ea" stroke="#6b21a8" stroke-width="2" rx="8"/>
  <text x="720" y="225" text-anchor="middle" font-size="13" fill="white" font-weight="bold">exoself_N</text>
  <text x="720" y="245" text-anchor="middle" font-size="10" fill="white">(process)</text>

  <!-- Dotted line for "..." -->
  <text x="590" y="235" text-anchor="middle" font-size="20" fill="#666">...</text>

  <!-- Cortex -->
  <rect x="100" y="320" width="160" height="50" fill="#16a34a" stroke="#15803d" stroke-width="2" rx="6"/>
  <text x="180" y="340" text-anchor="middle" font-size="12" fill="white" font-weight="bold">cortex</text>
  <text x="180" y="358" text-anchor="middle" font-size="10" fill="white">spawn_link</text>

  <!-- Sensors -->
  <rect x="20" y="430" width="100" height="45" fill="#0891b2" stroke="#0e7490" stroke-width="2" rx="5"/>
  <text x="70" y="448" text-anchor="middle" font-size="11" fill="white" font-weight="bold">sensor_1</text>
  <text x="70" y="465" text-anchor="middle" font-size="9" fill="white">spawn_link</text>

  <rect x="135" y="430" width="100" height="45" fill="#0891b2" stroke="#0e7490" stroke-width="2" rx="5"/>
  <text x="185" y="448" text-anchor="middle" font-size="11" fill="white" font-weight="bold">sensor_2</text>
  <text x="185" y="465" text-anchor="middle" font-size="9" fill="white">spawn_link</text>

  <!-- Neurons -->
  <rect x="20" y="520" width="100" height="45" fill="#2563eb" stroke="#1d4ed8" stroke-width="2" rx="5"/>
  <text x="70" y="538" text-anchor="middle" font-size="11" fill="white" font-weight="bold">neuron_1</text>
  <text x="70" y="555" text-anchor="middle" font-size="9" fill="white">spawn_link</text>

  <rect x="135" y="520" width="100" height="45" fill="#2563eb" stroke="#1d4ed8" stroke-width="2" rx="5"/>
  <text x="185" y="538" text-anchor="middle" font-size="11" fill="white" font-weight="bold">neuron_2</text>
  <text x="185" y="555" text-anchor="middle" font-size="9" fill="white">spawn_link</text>

  <rect x="250" y="520" width="100" height="45" fill="#2563eb" stroke="#1d4ed8" stroke-width="2" rx="5"/>
  <text x="300" y="538" text-anchor="middle" font-size="11" fill="white" font-weight="bold">neuron_N</text>
  <text x="300" y="555" text-anchor="middle" font-size="9" fill="white">spawn_link</text>

  <!-- Actuators -->
  <rect x="20" y="610" width="100" height="45" fill="#7c3aed" stroke="#6d28d9" stroke-width="2" rx="5"/>
  <text x="70" y="628" text-anchor="middle" font-size="11" fill="white" font-weight="bold">actuator_1</text>
  <text x="70" y="645" text-anchor="middle" font-size="9" fill="white">spawn_link</text>

  <rect x="135" y="610" width="100" height="45" fill="#7c3aed" stroke="#6d28d9" stroke-width="2" rx="5"/>
  <text x="185" y="628" text-anchor="middle" font-size="11" fill="white" font-weight="bold">actuator_2</text>
  <text x="185" y="645" text-anchor="middle" font-size="9" fill="white">spawn_link</text>

  <!-- Supervision links -->
  <line x1="450" y1="140" x2="180" y2="200" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="450" y1="140" x2="450" y2="200" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="450" y1="140" x2="720" y2="200" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <line x1="180" y1="260" x2="180" y2="320" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <line x1="130" y1="370" x2="70" y2="430" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="150" y1="370" x2="185" y2="430" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <line x1="130" y1="370" x2="70" y2="520" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="150" y1="370" x2="185" y2="520" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="180" y1="370" x2="300" y2="520" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <line x1="130" y1="370" x2="70" y2="610" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="150" y1="370" x2="185" y2="610" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Annotations -->
  <g>
    <rect x="400" y="320" width="300" height="280" fill="none" stroke="#94a3b8" stroke-width="2" stroke-dasharray="5,5" rx="10"/>
    <text x="550" y="340" text-anchor="middle" font-size="11" fill="#475569" font-weight="bold">Network Process Group</text>
    <text x="550" y="365" text-anchor="middle" font-size="10" fill="#64748b">All linked for crash propagation</text>

    <text x="550" y="395" text-anchor="middle" font-size="10" fill="#64748b">• cortex coordinates evaluation</text>
    <text x="550" y="415" text-anchor="middle" font-size="10" fill="#64748b">• sensors read input</text>
    <text x="550" y="435" text-anchor="middle" font-size="10" fill="#64748b">• neurons process signals</text>
    <text x="550" y="455" text-anchor="middle" font-size="10" fill="#64748b">• actuators produce output</text>

    <text x="550" y="485" text-anchor="middle" font-size="10" fill="#64748b" font-style="italic">Timeouts:</text>
    <text x="550" y="505" text-anchor="middle" font-size="9" fill="#64748b">cortex: 30s sync timeout</text>
    <text x="550" y="523" text-anchor="middle" font-size="9" fill="#64748b">neuron: 10s input timeout</text>

    <text x="550" y="553" text-anchor="middle" font-size="10" fill="#64748b" font-style="italic">Failure handling:</text>
    <text x="550" y="573" text-anchor="middle" font-size="9" fill="#64748b">Any crash → terminate network</text>
    <text x="550" y="591" text-anchor="middle" font-size="9" fill="#64748b">Report to exoself</text>
  </g>

  <!-- Legend -->
  <rect x="20" y="20" width="200" height="50" fill="none" stroke="#cbd5e1" stroke-width="1" rx="5"/>
  <text x="30" y="40" font-size="11" font-weight="bold">Process Types:</text>
  <rect x="30" y="48" width="15" height="10" fill="#dc2626"/>
  <text x="50" y="57" font-size="9">Population Manager</text>
  <rect x="130" y="48" width="15" height="10" fill="#9333ea"/>
  <text x="150" y="57" font-size="9">Agent Process</text>
</svg>
